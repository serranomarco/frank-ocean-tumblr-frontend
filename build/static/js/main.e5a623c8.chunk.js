(this["webpackJsonpfrank-ocean-tumblr-frontend"]=this["webpackJsonpfrank-ocean-tumblr-frontend"]||[]).push([[0],{36:function(e,t,a){e.exports=a(50)},41:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(27),c=a.n(s),r=(a(41),a(3)),l=a(15),i=a(4),u=o.a.createContext(),m=a(2),p=a.n(m),d=a(5),f="https://endless-tumblr-backend.herokuapp.com/",b=function(){var e=Object(n.useContext)(u),t=e.login,a=e.username,s=Object(n.useState)(!1),c=Object(r.a)(s,2),m=c[0],b=c[1],_=Object(n.useState)("demo@example.com"),h=Object(r.a)(_,2),E=h[0],v=h[1],x=Object(n.useState)("password"),N=Object(r.a)(x,2),g=N[0],y=N[1],j=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("".concat(f,"/api/users/token"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:E,password:g})});case 3:if(!(n=e.sent).ok){e.next=11;break}return e.next=7,n.json();case 7:o=e.sent,console.log(o),t(o.token,o.user.id,o.user.userName),b(!0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?o.a.createElement(i.a,{to:"/".concat(a,"/blog")}):o.a.createElement("main",{className:"login"},o.a.createElement("nav",{className:"login__nav"},o.a.createElement("h1",{className:"logo"},"e"),o.a.createElement(l.b,{className:"navlink",to:"/register"},o.a.createElement("button",{className:"login__button",type:"submit"},"Register"))),o.a.createElement("h1",{className:"title"},"endless"),o.a.createElement("form",{onSubmit:j,className:"login__form"},o.a.createElement("input",{className:"login__email",type:"text",placeholder:"Email",value:E,onChange:function(e){v(e.target.value)}}),o.a.createElement("input",{className:"login__password",type:"password",placeholder:"Password",value:g,onChange:function(e){y(e.target.value)}}),o.a.createElement("button",{className:"login__button",type:"submit"},"Login")))},_=function(){var e=Object(n.useContext)(u),t=e.login,a=e.username,s=Object(n.useState)(!1),c=Object(r.a)(s,2),m=c[0],b=c[1],_=Object(n.useState)(""),h=Object(r.a)(_,2),E=h[0],v=h[1],x=Object(n.useState)(""),N=Object(r.a)(x,2),g=N[0],y=N[1],j=Object(n.useState)(""),k=Object(r.a)(j,2),O=k[0],S=k[1],C=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("".concat(f,"/api/users/register"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userName:E,email:g,password:O})});case 3:if(!(n=e.sent).ok){e.next=10;break}return e.next=7,n.json();case 7:o=e.sent,t(o.token,o.user.id,o.user.userName),b(!0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return m?o.a.createElement(i.a,{to:"/".concat(a,"/blog")}):o.a.createElement("main",{className:"login"},o.a.createElement("nav",{className:"login__nav"},o.a.createElement("h1",{className:"logo"},"e"),o.a.createElement(l.b,{className:"navlink",to:"/login"},o.a.createElement("button",{className:"login__button",type:"submit"},"Log In"))),o.a.createElement("h1",{className:"title"},"endless"),o.a.createElement("form",{onSubmit:C,className:"login__form"},o.a.createElement("input",{className:"login__email",type:"text",placeholder:"Username",value:E,onChange:function(e){v(e.target.value)}}),o.a.createElement("input",{className:"login__email",type:"text",placeholder:"Email",value:g,onChange:function(e){y(e.target.value)}}),o.a.createElement("input",{className:"login__password",type:"password",placeholder:"Password",value:O,onChange:function(e){S(e.target.value)}}),o.a.createElement("button",{className:"login__button",type:"submit"},"Register")))},h=a(28),E=a.n(h),v=a(29),x=a.n(v),N=a(30),g=a.n(N),y=function(){return o.a.createElement("nav",{className:"feed__nav"},o.a.createElement("a",{href:"/",className:"feed__logo"},"endless"),o.a.createElement("div",{className:"feed__icons"},o.a.createElement(E.a,{style:{fontSize:45},className:"feed__home"}),o.a.createElement(x.a,{style:{fontSize:45},className:"feed__profile"}),o.a.createElement(g.a,{style:{fontSize:45},className:"feed__profile"})))},j=a(31),k=a.n(j),O=a(32),S=a.n(O),C=a(33),w=a.n(C),q=function(){var e=Object(n.useContext)(u),t=e.authToken,a=e.username,s=Object(n.useState)(""),c=Object(r.a)(s,2),l=c[0],i=c[1],m=Object(n.useState)(""),b=Object(r.a)(m,2),_=b[0],h=b[1],E=Object(n.useState)(""),v=Object(r.a)(E,2),x=v[0],N=v[1],g=Object(n.useState)(""),y=Object(r.a)(g,2),j=y[0],O=y[1],C=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("".concat(f,"/api/posts"),{method:"post",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({postTypeId:1})});case 3:if(!(o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:s=e.sent,n=Number.parseInt(s.post.id),console.log(s);case 10:return console.log(n),e.next=13,fetch("".concat(f,"/api/posts/text"),{method:"post",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({postId:n,title:l,text:_,postTypeId:1})});case 13:if(!(c=e.sent).ok){e.next=19;break}return e.next=17,c.json();case 17:r=e.sent,console.log(r);case 19:window.location.reload();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o,s,c,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("".concat(f,"/api/posts"),{method:"post",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({postTypeId:3})});case 3:if(!(o=e.sent).ok){e.next=10;break}return e.next=7,o.json();case 7:s=e.sent,n=Number.parseInt(s.post.id),console.log(s);case 10:return console.log(n),e.next=13,fetch("".concat(f,"/api/posts/quote"),{method:"post",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({postId:n,quote:x,source:j,postTypeId:3})});case 13:if(!(c=e.sent).ok){e.next=19;break}return e.next=17,c.json();case 17:r=e.sent,console.log(r);case 19:window.location.reload();case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("div",{className:"post-bar__container"},o.a.createElement("button",{className:"post__button",type:"submit",onClick:function(e){e.preventDefault(),document.querySelector(".modal-text").classList.remove("modal-text--hidden")}},o.a.createElement(k.a,{style:{fontSize:40},className:"post__icon-text"}),o.a.createElement("p",{id:"text"},"Text")),o.a.createElement("button",{className:"post__button",type:"submit"},o.a.createElement(S.a,{style:{fontSize:40},className:"post__icon-photo"}),o.a.createElement("p",{id:"photo"},"Photo")),o.a.createElement("button",{className:"post__button",type:"submit",onClick:function(e){e.preventDefault(),document.querySelector(".modal-quote").classList.remove("modal-quote--hidden")}},o.a.createElement(w.a,{style:{fontSize:40},className:"post__icon-quote"}),o.a.createElement("p",{id:"quote"},"Quote")),o.a.createElement("div",{className:"modal-text modal-text--hidden"},o.a.createElement("form",{className:"post__text-form",onSubmit:C},o.a.createElement("div",null,o.a.createElement("p",{className:"username"},a),o.a.createElement("input",{className:"title-text",type:"text",placeholder:"Title",onChange:function(e){i(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("textarea",{className:"text-text",type:"text",placeholder:"Your text here",onChange:function(e){h(e.target.value)}})),o.a.createElement("div",{className:"button__container"},o.a.createElement("button",{className:"button__close",type:"submit",onClick:function(e){e.preventDefault(),document.querySelector(".modal-text").classList.add("modal-text--hidden")}},"Close"),o.a.createElement("button",{className:"button__post",type:"submit"},"Post")))),o.a.createElement("div",{className:"modal-quote modal-quote--hidden"},o.a.createElement("form",{className:"post__quote-form",onSubmit:q},o.a.createElement("div",null,o.a.createElement("p",{className:"username"},a),o.a.createElement("textarea",{className:"quote-quote",type:"text",placeholder:"Quote",onChange:function(e){N(e.target.value)}})),o.a.createElement("div",{className:"source__container"},o.a.createElement("span",{id:"slash"},"\u2013"),o.a.createElement("input",{className:"source-quote",type:"text",placeholder:"source",onChange:function(e){O(e.target.value)}})),o.a.createElement("div",{className:"button__container"},o.a.createElement("button",{className:"button__close",type:"submit",onClick:function(e){e.preventDefault(),document.querySelector(".modal-quote").classList.add("modal-quote--hidden")}},"Close"),o.a.createElement("button",{className:"button__post",type:"submit"},"Post")))))},I=a(34),T=a(20),z=a.n(T),L=a(22),D=a.n(L),A=a(23),P=a.n(A),B=a(24),J=a.n(B),Q=a(21),U=a.n(Q),R=function(){var e=Object(n.useContext)(u),t=e.authToken,a=e.userId,s=e.username,c=Object(n.useState)([]),l=Object(r.a)(c,2),i=l[0],m=l[1],b=Object(n.useState)([]),_=Object(r.a)(b,2),h=_[0],E=_[1],v=Object(n.useState)(""),x=Object(r.a)(v,2),N=x[0],g=x[1],y=Object(n.useState)(""),j=Object(r.a)(y,2),k=j[0],O=j[1],S=Object(n.useState)(""),C=Object(r.a)(S,2),w=C[0],q=C[1],T=Object(n.useState)(""),L=Object(r.a)(T,2),A=L[0],B=L[1],Q=Object(n.useState)(-1),R=Object(r.a)(Q,2),Y=R[0],M=R[1],F=function(e){O(e.target.value)},G=function(e){g(e.target.value)},H=function(e){q(e.target.value)},K=function(e){B(e.target.value)},V=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.target.getAttribute("id"),(o=fetch("".concat(f,"/api/posts/").concat(n,"/like"),{method:"post",headers:{Authorization:"Bearer ".concat(t)}})).ok&&o.json(),window.location.reload();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.getAttribute("id"),o=a.target.parentNode.parentNode.parentNode,a.preventDefault(),e.next=5,fetch("".concat(f,"/api/posts/").concat(n,"/text"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 5:return s=e.sent,e.next=8,fetch("".concat(f,"/api/posts/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 8:if(c=e.sent,!s.ok){e.next=13;break}return e.next=12,s.json();case 12:e.sent;case 13:if(!c.ok){e.next=18;break}return e.next=16,c.json();case 16:e.sent,o.remove();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(d.a)(p.a.mark((function e(a){var n,o,s,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.target.getAttribute("id"),o=a.target.parentNode.parentNode.parentNode,a.preventDefault(),e.next=5,fetch("".concat(f,"/api/posts/").concat(n,"/quote"),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 5:return s=e.sent,e.next=8,fetch("".concat(f,"/api/posts/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});case 8:if(c=e.sent,!s.ok){e.next=13;break}return e.next=12,s.json();case 12:e.sent;case 13:if(!c.ok){e.next=18;break}return e.next=16,c.json();case 16:e.sent,o.remove();case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.getAttribute("id"),e.next=4,fetch("".concat(f,"/api/posts/").concat(a));case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:o=e.sent,M(o.post.Texts[0].postId),g(o.post.Texts[0].title),O(o.post.Texts[0].text);case 12:document.querySelector(".modal-text-edit").classList.remove("modal-text-edit--hidden");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(d.a)(p.a.mark((function e(t){var a,n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.getAttribute("id"),e.next=4,fetch("".concat(f,"/api/posts/").concat(a));case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:o=e.sent,M(o.post.Quotes[0].postId),q(o.post.Quotes[0].quote),B(o.post.Quotes[0].source);case 12:document.querySelector(".modal-quote-edit").classList.remove("modal-quote-edit--hidden");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(e){e.preventDefault(),document.querySelector(".modal-text-edit").classList.add("modal-text-edit--hidden")},te=function(e){e.preventDefault(),document.querySelector(".modal-quote-edit").classList.add("modal-quote-edit--hidden")},ae=function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/posts/").concat(Y,"/text"),{method:"put",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({title:N,text:k})});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(d.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/posts/").concat(Y,"/quote"),{method:"put",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify({quote:w,source:A})});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=function(e){var t,a=[],n=Object(I.a)(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;a.push(o.postId)}}catch(s){n.e(s)}finally{n.f()}m(a)};return Object(n.useEffect)((function(){function e(){return(e=Object(d.a)(p.a.mark((function e(){var n,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(f,"/api/posts/following/").concat(a),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});case 2:if(!(n=e.sent).ok){e.next=9;break}return e.next=6,n.json();case 6:o=e.sent,E(o.sortedPosts),oe(o.likedPosts);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,t]),h.map((function(e){if(console.log(i.includes(e.id)),1===e.postTypeId)return o.a.createElement("div",{className:"container",id:e.id,key:e.id},o.a.createElement("div",{className:"post__profile-pic-container"},o.a.createElement("img",{className:"post__profile-pic",alt:"profile-pic",src:e.User.profilePicPath})),o.a.createElement("div",{className:"post__container"},o.a.createElement("div",{className:"post__username"},s),o.a.createElement("div",{className:"post__title"},e.Texts[0].title),o.a.createElement("div",{className:"post__text"},e.Texts[0].text),o.a.createElement("div",{className:"post__icon-container"},o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit"},o.a.createElement(z.a,{style:{fontSize:30},className:"post__comment"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:V},i.includes(e.id)?o.a.createElement(U.a,{style:{fontSize:30},className:"post__liked"}):o.a.createElement(D.a,{style:{fontSize:30},className:"post__like"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:W},o.a.createElement(P.a,{style:{fontSize:30},className:"post__delete"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:Z},o.a.createElement(J.a,{style:{fontSize:30},className:"post__edit"}))),o.a.createElement("div",{className:"modal-text-edit modal-text-edit--hidden"},o.a.createElement("form",{className:"post__text-form"},o.a.createElement("div",null,o.a.createElement("p",{className:"username"},s),o.a.createElement("input",{className:"title-text",value:N,type:"text",placeholder:"Title",onChange:G})),o.a.createElement("div",null,o.a.createElement("textarea",{className:"text-text",value:k,type:"text",placeholder:"Your text here",onChange:F})),o.a.createElement("div",{className:"button__container"},o.a.createElement("button",{className:"button__close",type:"submit",onClick:ee},"Close"),o.a.createElement("button",{className:"button__post",id:Y,type:"submit",onClick:ae},"Post"))))));if(2===e.postTypeId);else if(3===e.postTypeId)return o.a.createElement("div",{className:"container",key:e.id},o.a.createElement("div",{className:"post__profile-pic-container"},o.a.createElement("img",{className:"post__profile-pic",alt:"profile-pic",src:e.User.profilePicPath})),o.a.createElement("div",{className:"post__container"},o.a.createElement("div",{className:"post__username"},s),o.a.createElement("div",{className:"post__quote"},e.Quotes[0].quote),o.a.createElement("div",{className:"post__source"},e.Quotes[0].source),o.a.createElement("div",{className:"post__icon-container"},o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit"},o.a.createElement(z.a,{style:{fontSize:30},className:"post__comment"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:V},i.includes(e.id)?o.a.createElement(U.a,{style:{fontSize:30},className:"post__liked"}):o.a.createElement(D.a,{style:{fontSize:30},className:"post__like"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:X},o.a.createElement(P.a,{style:{fontSize:30},className:"post__delete"})),o.a.createElement("button",{id:e.id,className:"text-post__button",type:"submit",onClick:$},o.a.createElement(J.a,{style:{fontSize:30},className:"post__edit"}))),o.a.createElement("div",{className:"modal-quote-edit modal-quote-edit--hidden"},o.a.createElement("form",{className:"post__quote-form"},o.a.createElement("div",null,o.a.createElement("p",{className:"username"},s),o.a.createElement("textarea",{className:"quote-quote",value:w,type:"text",placeholder:"Quote",onChange:H})),o.a.createElement("div",null,o.a.createElement("input",{className:"source-quote",value:A,type:"text",placeholder:"source",onChange:K})),o.a.createElement("div",{className:"button__container"},o.a.createElement("button",{className:"button__close",type:"submit",onClick:te},"Close"),o.a.createElement("button",{className:"button__post",id:Y,type:"submit",onClick:ne},"Post"))))))}))},Y=function(){return o.a.createElement("main",null,o.a.createElement(y,null),o.a.createElement(q,null),o.a.createElement(R,null))},M=function(e){var t=e.path,a=e.component,n=e.needLogin;return o.a.createElement(i.b,{path:t,render:function(e){return!0===n?o.a.createElement(i.a,{to:"/login"}):o.a.createElement(a,null)}})};var F=function(){var e=Object(n.useContext)(u),t=e.needLogin,a=e.username;return console.log(t),o.a.createElement(l.a,null,o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/login",component:b}),o.a.createElement(i.b,{path:"/register",component:_}),o.a.createElement(M,{path:"/".concat(a,"/blog"),component:Y,needLogin:t}),o.a.createElement(M,{path:"/",component:Y,needLogin:t})))},G=function(){var e=Object(n.useState)(localStorage.getItem("state-endless-token")),t=Object(r.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(localStorage.getItem("state-endless-userId")),l=Object(r.a)(c,2),i=l[0],m=l[1],p=Object(n.useState)(localStorage.getItem("state-endless-username")),d=Object(r.a)(p,2),f=d[0],b=d[1],_=Object(n.useState)(!localStorage.getItem("state-endless-token")),h=Object(r.a)(_,2),E=h[0],v=h[1];return o.a.createElement(u.Provider,{value:{login:function(e,t,a){localStorage.setItem("state-endless-token",e),localStorage.setItem("state-endless-userId",t),localStorage.setItem("state-endless-username",a),s(localStorage.getItem("state-endless-token")),m(localStorage.getItem("state-endless-userId")),b(localStorage.getItem("state-endless-username")),v(!1)},needLogin:E,authToken:a,username:f,userId:i}},o.a.createElement(F,null))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(G,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e5a623c8.chunk.js.map